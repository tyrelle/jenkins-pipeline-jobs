node ('local-mac'){
  stage 'Build'
      echo 'Reading config files'
      sh 'sleep 1s'


  stage 'Unit Tests'
    parallel (
      "eCatt Tests": {
        echo 'eCatt tests'
        git url: 'https://github.com/tyrelle/jenkins-pipeline-jobs.git', branch: 'master'
        checkout scm
        def rootDir = pwd()
        def ret = sh(script: 'groovy groovy-scripts/test.groovy', returnStdout: true)
      //  def example = load "${rootDir}/groovy-scripts/test.groovy"
      //  example.testOutput()
        echo "from pipeline = " + ret
      },
      "SOAP UI Tests": {
        echo 'SOAP UI tests'
        sh "sleep 1s"
      }
    )

  stage 'QA Tests'
    echo 'QA Tests'
    sh "sleep 4s"

  stage 'Release Transports'
    echo 'Releasing Transports'
    sh "sleep 2s"

  stage 'L1 Approval'
    input 'Give L1 Approvals?'
    sh "sleep 2s"

  stage 'L2 Approval'
    input 'Give L2 Approvals?'
    sh "sleep 2s"

  stage 'Deployed to SIT1'
    echo 'Transports moving to SIT1'
    sh "sleep 2s"

  stage 'QA Tests'
    echo 'QA Tests'
    sh "sleep 4s"
}
